{"version":3,"sources":["redux/types.js","redux/reducers/galeryReducer.js","assets/images.js","redux/reducers/calcReducer.js","redux/reducers/errorReducer.js","redux/store.js","restrictions/index.js","redux/actions/calcAction.js","redux/actions/errorAction.js","redux/actions/galeryAction.js","components/DropField/index.js","components/DropField/DropField.js","redux/selectors/errorSelector.js","components/ErrorMessage/index.js","components/ErrorMessage/ErrorMessage.js","redux/selectors/calcSelector.js","redux/selectors/galerySelector.js","components/EmptyGalery/index.js","components/EmptyGalery/EmptyGalery.js","components/ImageCard/index.js","components/ImageCard/ImageCard.js","assets/delete.png","components/Galery/index.js","components/Galery/Galery.js","components/Loader/Loader.js","components/Loader/index.js","App.js","index.js"],"names":["ADD_NEW_ERROR","DELETE_ERROR","ADD_IMAGE","ADD_IMAGES_ARRAY","DELETE_IMAGE","SET_GALERY_WIDTH","SET_CALC_RESULT","galeryReducerInit","galleryImages","url","width","height","galeryReducer","state","action","type","payload","galery","filter","image","index","calcReducerInit","galeryWidth","window","innerWidth","cardsArr","rowsArr","calcReducer","errorReducerInit","errors","errorReducer","err","allReducers","combineReducers","middleware","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","createStore","rowNormalHeight","rowMaxHeight","handleGaleryWidthAction","newWidth","dispatch","getState","Math","ceil","setGaleryWidthAction","setCalcResultAction","rowNumber","rowWidth","forEach","cardNormalWidth","newErrorAction","errorText","addErrorAction","setTimeout","deleteErrorAction","addImageAction","addImagesFromArrayAction","imagesArray","handleDeleteImageAction","deleteIndex","deleteImageAction","DropField","useState","dropFieldClasses","setDropFieldClasses","useDispatch","className","join","onDragEnter","event","preventDefault","stopPropagation","onDragLeave","onDragOver","onDrop","files","dataTransfer","i","length","file","startsWith","Image","reader","FileReader","onload","src","result","readAsDataURL","text","then","JSON","parse","data","catch","error","name","errorsSelector","ErrorMessage","useSelector","map","errMessage","galeryWidthSelector","cardsSelector","rowsSelector","galleryImagesSelector","EmptyGalery","ImageCard","rowScale","isLastRow","calcCardWidth","calcCardHeight","cardStyle","style","alt","imagePadding","onClick","Galery","cards","rows","isImageUrl","exec","isJsonFile","Loader","input","setInput","onSubmit","jsonUrl","newImage","onerror","fetch","response","ok","Error","placeholder","onChange","target","value","App","contentRef","useRef","useEffect","resizeEvent","current","clientWidth","addEventListener","removeEventListener","ref","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4547ea1f.chunk.js","sourcesContent":["// main\r\nexport const ADD_NEW_ERROR = 'ADD_NEW_ERROR';\r\nexport const DELETE_ERROR = 'DELETE_ERROR';\r\n\r\n// galery\r\nexport const ADD_IMAGE = 'ADD_IMAGE';\r\nexport const ADD_IMAGES_ARRAY = 'ADD_IMAGES_ARRAY';\r\nexport const DELETE_IMAGE = 'DELETE_IMAGE';\r\n\r\n// calc\r\nexport const SET_GALERY_WIDTH = 'SET_GALERY_WIDTH';\r\nexport const SET_CALC_RESULT = 'SET_CALC_RESULT';\r\n","import { galleryImages } from 'assets/images';\r\nimport { ADD_IMAGE, ADD_IMAGES_ARRAY, DELETE_IMAGE } from 'redux/types';\r\n\r\nconst galeryReducerInit = {\r\n  galleryImages,\r\n};\r\n\r\nconst galeryReducer = (state = galeryReducerInit, action) => {\r\n  switch (action.type) {\r\n    case ADD_IMAGE:\r\n      return { ...state, galleryImages: [...state.galleryImages, action.payload] };\r\n\r\n    case ADD_IMAGES_ARRAY:\r\n      return {\r\n        ...state,\r\n        galleryImages: [...state.galleryImages, ...action.payload],\r\n      };\r\n\r\n    case DELETE_IMAGE:\r\n      const galery = state.galleryImages.filter((image, index) => index !== action.payload);\r\n      return { ...state, galleryImages: galery };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default galeryReducer;\r\n","export const galleryImages = [\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550746.jpg',\r\n    width: 640,\r\n    height: 426,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964007.jpg',\r\n    width: 1920,\r\n    height: 1200,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550739.jpg',\r\n    width: 640,\r\n    height: 426,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964009.jpg',\r\n    width: 436,\r\n    height: 650,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550740.jpg',\r\n    width: 600,\r\n    height: 400,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964008.jpg',\r\n    width: 509,\r\n    height: 339,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964011.jpg',\r\n    width: 900,\r\n    height: 450,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550755.jpg',\r\n    width: 480,\r\n    height: 640,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964013.jpg',\r\n    width: 472,\r\n    height: 640,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550745.jpg',\r\n    width: 640,\r\n    height: 425,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964014.jpg',\r\n    width: 240,\r\n    height: 320,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964016.jpg',\r\n    width: 540,\r\n    height: 337,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964020.jpg',\r\n    width: 1600,\r\n    height: 1000,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964010.jpg',\r\n    width: 1506,\r\n    height: 575,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/493550754.jpg',\r\n    width: 1280,\r\n    height: 1276,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964021.jpg',\r\n    width: 1280,\r\n    height: 800,\r\n  },\r\n  {\r\n    url: 'https://don16obqbay2c.cloudfront.net/frontend-test-task/images/448964012.jpg',\r\n    width: 787,\r\n    height: 787,\r\n  },\r\n];\r\n","import { SET_GALERY_WIDTH, SET_CALC_RESULT } from 'redux/types';\r\n\r\nconst calcReducerInit = {\r\n  galeryWidth: window.innerWidth,\r\n  cardsArr: [],\r\n  rowsArr: [],\r\n};\r\n\r\nconst calcReducer = (state = calcReducerInit, action) => {\r\n  switch (action.type) {\r\n    case SET_GALERY_WIDTH:\r\n      return { ...state, galeryWidth: action.payload };\r\n\r\n    case SET_CALC_RESULT:\r\n      return { ...state, ...action.payload };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default calcReducer;\r\n","import { ADD_NEW_ERROR, DELETE_ERROR } from 'redux/types';\r\n\r\nconst errorReducerInit = {\r\n  errors: [],\r\n};\r\n\r\nconst errorReducer = (state = errorReducerInit, action) => {\r\n  switch (action.type) {\r\n    case ADD_NEW_ERROR:\r\n      return { ...state, errors: [...state.errors, action.payload] };\r\n\r\n    case DELETE_ERROR:\r\n      return {\r\n        ...state,\r\n        errors: state.errors.filter((err) => err !== action.payload),\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default errorReducer;\r\n","import { createStore, compose, combineReducers, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport galeryReducer from 'redux/reducers/galeryReducer';\r\nimport calcReducer from 'redux/reducers/calcReducer';\r\nimport errorReducer from 'redux/reducers/errorReducer';\r\n\r\nconst allReducers = combineReducers({\r\n  galeryReducer,\r\n  calcReducer,\r\n  errorReducer,\r\n});\r\n\r\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst middleware = composeEnhancer(applyMiddleware(thunk));\r\nconst store = createStore(allReducers, middleware);\r\n\r\nexport default store;\r\n","export const rowNormalHeight = 150;\r\nexport const rowMaxHeight = rowNormalHeight * 1.2;\r\nexport const imagePadding = 3;\r\nexport const containerMaxWidth = 860;\r\nexport const containerMinWidth = 320;\r\n","import { SET_CALC_RESULT, SET_GALERY_WIDTH } from 'redux/types';\r\nimport { rowNormalHeight } from 'restrictions';\r\nimport store from 'redux/store';\r\n\r\nconst setGaleryWidthAction = (galeryWidth) => ({\r\n  type: SET_GALERY_WIDTH,\r\n  payload: Math.ceil(galeryWidth),\r\n});\r\n\r\nexport const handleGaleryWidthAction = (newWidth) => (dispatch) => {\r\n  const galeryWidth = store.getState().calcReducer.galeryWidth;\r\n  if (newWidth !== galeryWidth) {\r\n    dispatch(setGaleryWidthAction(newWidth));\r\n    dispatch(setCalcResultAction());\r\n  }\r\n};\r\n\r\nexport const setCalcResultAction = () => {\r\n  const galery = store.getState().galeryReducer.galleryImages;\r\n  const galeryWidth = store.getState().calcReducer.galeryWidth;\r\n\r\n  const cardsArr = [];\r\n  const rowsArr = [];\r\n  let rowNumber = 0;\r\n  let rowWidth = 0;\r\n\r\n  galery.forEach((image, index) => {\r\n    const cardNormalWidth = (rowNormalHeight / image.height) * image.width;\r\n\r\n    if (rowWidth + cardNormalWidth > galeryWidth) {\r\n      rowNumber++;\r\n      rowWidth = cardNormalWidth;\r\n    } else {\r\n      rowWidth = rowWidth + cardNormalWidth;\r\n    }\r\n\r\n    cardsArr[index] = {\r\n      index,\r\n      cardNormalWidth,\r\n      rowNumber,\r\n    };\r\n\r\n    rowsArr[rowNumber] = Math.ceil(rowWidth);\r\n  });\r\n\r\n  return {\r\n    type: SET_CALC_RESULT,\r\n    payload: { cardsArr, rowsArr },\r\n  };\r\n};\r\n","import { ADD_NEW_ERROR, DELETE_ERROR } from 'redux/types';\r\n\r\nconst addErrorAction = (errorText) => ({ type: ADD_NEW_ERROR, payload: errorText });\r\n\r\nconst deleteErrorAction = (errorText) => ({ type: DELETE_ERROR, payload: errorText });\r\n\r\nexport const newErrorAction = (errorText) => (dispatch) => {\r\n  dispatch(addErrorAction(errorText));\r\n  setTimeout(() => {\r\n    dispatch(deleteErrorAction(errorText));\r\n  }, 2000);\r\n};\r\n","import { ADD_IMAGES_ARRAY, DELETE_IMAGE, ADD_IMAGE } from 'redux/types';\r\nimport { setCalcResultAction } from './calcAction';\r\nimport { newErrorAction } from './errorAction';\r\n\r\nconst deleteImageAction = (deleteIndex) => ({ type: DELETE_IMAGE, payload: deleteIndex });\r\n\r\nconst addImageAction = (image) => ({ type: ADD_IMAGE, payload: image });\r\n\r\nconst addImagesFromArrayAction = (imagesArray) => ({\r\n  type: ADD_IMAGES_ARRAY,\r\n  payload: imagesArray,\r\n});\r\n\r\nexport const handleDeleteImageAction = (deleteIndex) => (dispatch) => {\r\n  dispatch(deleteImageAction(deleteIndex));\r\n  dispatch(setCalcResultAction());\r\n};\r\n\r\nexport const addImageFromUrlAction = (url) => (dispatch) => {\r\n  const newImage = new Image();\r\n  newImage.src = url;\r\n  newImage.onload = () => {\r\n    dispatch(addImageAction({ url, height: newImage.height, width: newImage.width }));\r\n    dispatch(setCalcResultAction());\r\n  };\r\n  newImage.onerror = () => {\r\n    dispatch(newErrorAction(`Error on image loading on url: ${url}`));\r\n  };\r\n};\r\n\r\nexport const addImagesFromDropAction = (files) => (dispatch) => {\r\n  for (let i = 0; i < files.length; i++) {\r\n    const file = files[i];\r\n    if (file.type.startsWith('image/')) {\r\n      const image = new Image();\r\n\r\n      const reader = new FileReader();\r\n      reader.onload = () => (image.src = reader.result);\r\n      reader.readAsDataURL(file);\r\n\r\n      image.onload = () => {\r\n        dispatch(addImageAction({ url: image.src, height: image.height, width: image.width }));\r\n        dispatch(setCalcResultAction());\r\n      };\r\n    } else if (file.type === 'application/json') {\r\n      file\r\n        .text()\r\n        .then((text) => JSON.parse(text))\r\n        .then((data) => {\r\n          if (data.galleryImages) {\r\n            dispatch(addImagesFromArrayAction(data.galleryImages));\r\n            dispatch(setCalcResultAction());\r\n          } else {\r\n            dispatch(\r\n              newErrorAction(\r\n                'Not supported file data. Json file should contain \"galleryImages\" array'\r\n              )\r\n            );\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          dispatch(newErrorAction(`Error in json file parsing: ${error}`));\r\n        });\r\n    } else {\r\n      dispatch(newErrorAction(`${file.name} - file type is not supported`));\r\n    }\r\n  }\r\n};\r\n\r\nexport const addImagesFromJsonFileAction = (jsonUrl) => (dispatch) => {\r\n  fetch(jsonUrl)\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        const error = new Error();\r\n        error.response = response;\r\n        throw error;\r\n      }\r\n      return response.text();\r\n    })\r\n    .then((text) => {\r\n      if (text !== '') {\r\n        const data = JSON.parse(text);\r\n        if (data.galleryImages) {\r\n          dispatch(addImagesFromArrayAction(data.galleryImages));\r\n          dispatch(setCalcResultAction());\r\n        } else {\r\n          dispatch(\r\n            newErrorAction(\r\n              'Not supported file data. Json file should contain \"galleryImages\" array'\r\n            )\r\n          );\r\n        }\r\n      } else {\r\n        dispatch(newErrorAction('Emty file data. Json file should contain \"galleryImages\" array'));\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      dispatch(newErrorAction(`Error in fetch: ${error}`));\r\n    });\r\n};\r\n","import DropField from './DropField';\r\n\r\nexport default DropField;\r\n","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { addImagesFromDropAction } from 'redux/actions/galeryAction';\r\nimport './dropField.scss';\r\n\r\nconst DropField = () => {\r\n  const [dropFieldClasses, setDropFieldClasses] = useState(['drop-field']);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleDragEnter = (event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    setDropFieldClasses(['drop-field', 'drop-field--drop-enter']);\r\n  };\r\n\r\n  const handleDragOver = (event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n  };\r\n\r\n  const handleDragLeave = () => {\r\n    setDropFieldClasses(['drop-field']);\r\n  };\r\n\r\n  const handleDrop = (event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    dispatch(addImagesFromDropAction(event.dataTransfer.files));\r\n    setDropFieldClasses(['drop-field']);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={dropFieldClasses.join(' ')}\r\n      onDragEnter={handleDragEnter}\r\n      onDragLeave={handleDragLeave}\r\n      onDragOver={handleDragOver}\r\n      onDrop={handleDrop}\r\n    />\r\n  );\r\n};\r\n\r\nexport default DropField;\r\n","export const errorsSelector = (state) => state.errorReducer.errors;\r\n","import ErrorMessage from './ErrorMessage';\r\n\r\nexport default ErrorMessage;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { errorsSelector } from 'redux/selectors/errorSelector';\r\nimport './errorMessage.scss';\r\n\r\nconst ErrorMessage = () => {\r\n  const errors = useSelector(errorsSelector);\r\n  return (\r\n    <div className=\"error-message\">\r\n      {!!errors.length &&\r\n        errors.map((errMessage) => (\r\n          <div key={errMessage} className=\"error-message__text\">\r\n            {errMessage}\r\n          </div>\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorMessage;\r\n","export const isChangedCalcSelector = (store) => store.calcReducer.isChanged;\r\nexport const galeryWidthSelector = (store) => store.calcReducer.galeryWidth;\r\nexport const cardsSelector = (store) => store.calcReducer.cardsArr;\r\nexport const rowsSelector = (store) => store.calcReducer.rowsArr;\r\n","export const galleryImagesSelector = (store) => store.galeryReducer.galleryImages;\r\n","import EmptyGalery from './EmptyGalery';\r\n\r\nexport default EmptyGalery;\r\n","import React from 'react';\r\nimport './emptyGalery.scss';\r\n\r\nconst EmptyGalery = () => (\r\n  <div className=\"empty-galery\">\r\n    <h2>Galery is empty</h2>\r\n    <p>Please enter url to image / json file or drop them here</p>\r\n  </div>\r\n);\r\n\r\nexport default EmptyGalery;\r\n","import ImageCard from './ImageCard';\r\n\r\nexport default ImageCard;\r\n","import React from 'react';\r\nimport { imagePadding, rowMaxHeight, rowNormalHeight } from 'restrictions';\r\nimport { useDispatch } from 'react-redux';\r\nimport { handleDeleteImageAction } from 'redux/actions/galeryAction';\r\nimport deleteIcon from 'assets/delete.png';\r\nimport './imageCard.scss';\r\n\r\nexport default function ImageCard({ index, url, cardNormalWidth, rowScale, isLastRow }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const calcCardWidth =\r\n    isLastRow && rowNormalHeight * rowScale > rowMaxHeight\r\n      ? cardNormalWidth * (rowMaxHeight / rowNormalHeight)\r\n      : cardNormalWidth * rowScale;\r\n  const calcCardHeight =\r\n    isLastRow && rowNormalHeight * rowScale > rowMaxHeight\r\n      ? rowMaxHeight\r\n      : rowNormalHeight * rowScale;\r\n\r\n  const cardStyle = {\r\n    width: calcCardWidth + 'px',\r\n    height: calcCardHeight + 'px',\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    dispatch(handleDeleteImageAction(index));\r\n  };\r\n\r\n  return (\r\n    <div style={cardStyle} className=\"card\">\r\n      <img\r\n        className=\"card__image\"\r\n        src={url}\r\n        alt=\"img\"\r\n        width={calcCardWidth - imagePadding * 2 + 'px'}\r\n        height={calcCardHeight - imagePadding * 2 + 'px'}\r\n      />\r\n      <button className=\"card__delete-btn\" onClick={handleDelete}>\r\n        <img src={deleteIcon} height=\"30px\" width=\"30px\" alt=\"Delete\" />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXIAAAFyBAMAAAAaCkw6AAAAFVBMVEUAAADPz8/////q6up1dXUoKCiurq45ZD7wAAADH0lEQVR42u3bzU7bQBAAYCPhnEkMvbP83J2o9xbxACEtnAuCvv8jFHBScQAUhx2zId+cMkJKPo0mG89oqVIXx+MutietyMnJycnJycnJyd+SL5PJ8o/bk5KTk5OTk5OTk5O/KTdZkJOTk5OTk5OT2+W+k866mL6bFjhZXK8X5cnPqvViUZx8vqa8Lk2+bsn/F70Y+XxteV2WfP2SV/WiKPn6JV8VvRB5j5KvOr0Q+byXvC5H3q/kXacXIZ/2K3lX9BLkzVHVNxZlyNt5b3ldhHyDkj91+lC73KZ7RF2mJ7OXaf+SP9KbV9/qOW2zThaHl8/xt4v7yxfpQ7VJ/H7trbr0Z1b5QTVcXGWVHw0o39ta+dX2dkubUX6yvd3iG/q1+9zZ4mxxtnyFPg+ZND8Ui6yTBTk5OTk5OTk5+S7KzaGlTnPLLfQgkXcL/d7mP3ead/PvNhQ5OTk5Obl7udv2H39N086adnVJ+Ol1vjRW/u35RsRt96mz5QWJTOltpLz5EThR7Lfk5OTk5OTk5B/f5a7SUHnoZEFOTk5OTk5OTr5LcpMFOTk5OTk5OTm5Xa7JgpycnJycnJyc3C7XZEFOTk5OTk5OTm6XayYiJycnJycnJye3yyUnJycnJycnJye3yyUnJycnJycnJ7fLNVmQk5OTk5OTk5Pb5ZosyMnJycnJycnJ7XLNROTk5OTk5OTk5Ha5ZiJycnJycnJycnK7XHJycnJycvLdlf8JlI8i5eODQPneOFL+PVD+q6e83/P5aaD8InSyOA+UT0LlKVCeYuVxx+J+sDzuWBwFy8/C5ItgedxX9C5YnuZB8DpFy6MafS9cfhr4OxQrPwmST8PlQe0ySvHy08BmiZWH/IzupyHkEUW/2kDe7/n8Kdp5QMn7MzaQN4cBXT6IfJx9jh6lgeTjWd5+qaeDySd5n7vu0nDyrOfLRRpSns5zNUx9l4aVp+OHLPCbSRpa/mi/v/5oXN5O0yfIU5p1Md08bSefI//UlJx8J+T9H4wLScnJycnJycnJyckz7nJNFuTk5OTk5OTk5Ha5JgtycnJy8i8p/wfEnSO8+tiGOQAAAABJRU5ErkJggg==\"","import Galery from './Galery';\r\n\r\nexport default Galery;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { cardsSelector, galeryWidthSelector, rowsSelector } from 'redux/selectors/calcSelector';\r\nimport { galleryImagesSelector } from 'redux/selectors/galerySelector';\r\nimport EmptyGalery from 'components/EmptyGalery';\r\nimport ImageCard from 'components/ImageCard';\r\nimport './galery.scss';\r\n\r\nexport default function Galery() {\r\n  const galery = useSelector(galleryImagesSelector);\r\n  const galeryWidth = useSelector(galeryWidthSelector);\r\n  const cards = useSelector(cardsSelector);\r\n  const rows = useSelector(rowsSelector);\r\n\r\n  return (\r\n    <div className=\"galery\">\r\n      {!cards.length && <EmptyGalery />}\r\n\r\n      {!!cards.length &&\r\n        cards.length === galery.length &&\r\n        galery.map((image, index) => (\r\n          <ImageCard\r\n            key={image.url + index}\r\n            index={index}\r\n            url={image.url}\r\n            cardNormalWidth={cards[index].cardNormalWidth}\r\n            rowScale={galeryWidth / rows[cards[index].rowNumber]}\r\n            isLastRow={cards[index].rowNumber === rows.length - 1}\r\n          />\r\n        ))}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { newErrorAction } from 'redux/actions/errorAction';\r\nimport { addImagesFromJsonFileAction, addImageFromUrlAction } from 'redux/actions/galeryAction';\r\nimport './loader.scss';\r\n\r\nexport default function Loader() {\r\n  const [input, setInput] = useState('');\r\n  const dispatch = useDispatch();\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (input === '') {\r\n      dispatch(newErrorAction('Please enter image url or json file url'));\r\n    } else if (isImageUrl(input)) {\r\n      dispatch(addImageFromUrlAction(input));\r\n    } else if (isJsonFile(input)) {\r\n      dispatch(addImagesFromJsonFileAction(input));\r\n    } else {\r\n      dispatch(newErrorAction('Not supported url. Please enter image url or json file url'));\r\n    }\r\n    setInput('');\r\n  };\r\n\r\n  const handleInput = (event) => {\r\n    setInput(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"loader\">\r\n      <form className=\"loader__form\" onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Put here url to image or json file\"\r\n          className=\"loader__form__input\"\r\n          onChange={handleInput}\r\n          value={input}\r\n        />\r\n        <button className=\"loader__form__button\">Загрузить</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst isImageUrl = (url) => {\r\n  const regExpImage = /^https?:\\/\\/.+\\.(?:jpe?g|gif|png)$/gi;\r\n  return !!regExpImage.exec(url);\r\n};\r\n\r\nconst isJsonFile = (url) => {\r\n  const regExpJson = /^https?:\\/\\/.+\\.json$/gi;\r\n  return !!regExpJson.exec(url);\r\n};\r\n","import Loader from './Loader';\r\n\r\nexport default Loader;\r\n","import DropField from 'components/DropField';\r\nimport ErrorMessage from 'components/ErrorMessage';\r\nimport Galery from 'components/Galery';\r\nimport Loader from 'components/Loader';\r\nimport React, { useEffect, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { handleGaleryWidthAction } from 'redux/actions/calcAction';\r\nimport './app.scss';\r\n\r\nconst App = () => {\r\n  const dispatch = useDispatch();\r\n  const contentRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const resizeEvent = () => {\r\n      if (contentRef.current) {\r\n        dispatch(handleGaleryWidthAction(contentRef.current.clientWidth));\r\n      }\r\n    };\r\n    resizeEvent();\r\n\r\n    window.addEventListener('resize', resizeEvent);\r\n    return () => {\r\n      window.removeEventListener('resize', resizeEvent);\r\n    };\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <div className=\"app\" ref={contentRef}>\r\n      <ErrorMessage />\r\n      <Loader />\r\n      <Galery />\r\n      <DropField />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport store from 'redux/store';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport './index.scss';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}