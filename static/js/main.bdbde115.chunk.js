(this["webpackJsonpecwid-test"]=this["webpackJsonpecwid-test"]||[]).push([[0],{26:function(e,t,r){},28:function(e,t,r){},29:function(e,t,r){},30:function(e,t,r){},31:function(e,t,r){},32:function(e,t,r){},33:function(e,t,r){},34:function(e,t,r){},35:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(7),o=r.n(c),i=r(4),l=r(14),s=r(5),u=r(3),d="ADD_NEW_ERROR",f="DELETE_ERROR",j="ADD_IMAGE",g="ADD_IMAGES_ARRAY",h="DELETE_IMAGE",p="SET_CALC_RESULT",b={galleryImages:[]},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(u.a)(Object(u.a)({},e),{},{galleryImages:[].concat(Object(s.a)(e.galleryImages),[t.payload])});case g:return Object(u.a)(Object(u.a)({},e),{},{galleryImages:[].concat(Object(s.a)(e.galleryImages),Object(s.a)(t.payload))});case h:var r=e.galleryImages.filter((function(e,r){return r!==t.payload}));return Object(u.a)(Object(u.a)({},e),{},{galleryImages:r});default:return e}},m={galeryWidth:window.innerWidth,cardsArr:[],rowsArr:[]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(u.a)(Object(u.a)({},e),t.payload);default:return e}},v={errors:[]},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(u.a)(Object(u.a)({},e),{},{errors:[].concat(Object(s.a)(e.errors),[t.payload])});case f:return Object(u.a)(Object(u.a)({},e),{},{errors:e.errors.filter((function(e){return e!==t.payload}))});default:return e}},w=Object(i.c)({galeryReducer:O,calcReducer:y,errorReducer:x}),_=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d)(Object(i.a)(l.a)),E=Object(i.e)(w,_),N=r(2),R=150,I=180,D=function(){var e=E.getState().galeryReducer.galleryImages,t=Math.ceil(document.body.scrollWidth),r=[],n=[],a=0,c=0;return e.forEach((function(e,o){var i=R/e.height*e.width;c+i>t?(a++,c=i):c+=i,r[o]={index:o,cardNormalWidth:i,rowNumber:a},n[a]=Math.ceil(c)})),{type:p,payload:{galeryWidth:t,cardsArr:r,rowsArr:n}}},A=r(9),S=function(e){return function(t){t(function(e){return{type:d,payload:e}}(e)),setTimeout((function(){t(function(e){return{type:f,payload:e}}(e))}),2e3)}},W=function(e){return{type:j,payload:e}},L=function(e){return{type:g,payload:e}},P=function(e){return function(t){t(function(e){return{type:h,payload:e}}(e)),t(D())}},T=(r(26),r(1)),J=function(){var e=Object(n.useState)(["drop-field"]),t=Object(A.a)(e,2),r=t[0],a=t[1],c=Object(N.b)();return Object(T.jsx)("div",{className:r.join(" "),onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),a(["drop-field","drop-field--drop-enter"])},onDragLeave:function(){a(["drop-field"])},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDrop:function(e){var t;e.preventDefault(),e.stopPropagation(),c((t=e.dataTransfer.files,function(e){for(var r=0;r<t.length;r++){var n=t[r];n.type.startsWith("image/")?function(){var t=new Image,r=new FileReader;r.onload=function(){return t.src=r.result},r.readAsDataURL(n),t.onload=function(){e(W({url:t.src,height:t.height,width:t.width})),e(D())}}():"application/json"===n.type?n.text().then((function(e){return JSON.parse(e)})).then((function(t){t.galleryImages?(e(L(t.galleryImages)),e(D())):e(S('Not supported file data. Json file should contain "galleryImages" array'))})).catch((function(t){e(S("Error in json file parsing: ".concat(t)))})):e(S("".concat(n.name," - file type is not supported")))}})),a(["drop-field"])}})},M=function(e){return e.errorReducer.errors},C=(r(28),function(){var e=Object(N.c)(M);return Object(T.jsx)("div",{className:"error-message",children:!!e.length&&e.map((function(e){return Object(T.jsx)("div",{className:"error-message__text",children:e},e)}))})}),k=function(e){return e.calcReducer.galeryWidth},G=function(e){return e.calcReducer.cardsArr},U=function(e){return e.calcReducer.rowsArr},X=function(e){return e.galeryReducer.galleryImages},$=(r(29),function(){return Object(T.jsxs)("div",{className:"empty-galery",children:[Object(T.jsx)("h2",{children:"Galery is empty"}),Object(T.jsx)("p",{children:"Please enter url to image / json file or drop them here"})]})}),z=r.p+"static/media/delete.82438203.svg";r(30);var B=function(e){var t=e.index,r=e.url,n=e.cardNormalWidth,a=e.rowScale,c=e.isLastRow,o=Object(N.b)(),i=c&&R*a>I?1.2*n:n*a,l=c&&R*a>I?I:R*a,s={width:i+"px",height:l+"px"};return Object(T.jsxs)("div",{style:s,className:"card",children:[Object(T.jsx)("img",{className:"card__image",src:r,alt:"img",width:i-6+"px",height:l-6+"px"}),Object(T.jsx)("button",{className:"card__delete-btn",onClick:function(){o(P(t))},children:Object(T.jsx)("img",{src:z,alt:"Delete"})})]})};r(31);var F=function(){var e=Object(N.c)(X),t=Object(N.c)(k),r=Object(N.c)(G),n=Object(N.c)(U);return Object(T.jsxs)("div",{className:"galery",children:[!r.length&&Object(T.jsx)($,{}),!!r.length&&r.length===e.length&&e.map((function(e,a){return Object(T.jsx)(B,{index:a,url:e.url,cardNormalWidth:r[a].cardNormalWidth,rowScale:t/n[r[a].rowNumber],isLastRow:r[a].rowNumber===n.length-1},e.url+a)}))]})};r(32);var V=function(e){return!!/^https?:\/\/.+\.(?:jpe?g|gif|png)$/gi.exec(e)},Y=function(e){return!!/^https?:\/\/.+\.json$/gi.exec(e)},q=function(){var e=Object(n.useState)(""),t=Object(A.a)(e,2),r=t[0],a=t[1],c=Object(N.b)();return Object(T.jsx)("div",{className:"loader",children:Object(T.jsxs)("form",{className:"loader__form",onSubmit:function(e){var t,n;e.preventDefault(),""===r?c(S("Please enter image url or json file url")):V(r)?c((n=r,function(e){var t=new Image;t.src=n,t.onload=function(){e(W({url:n,height:t.height,width:t.width})),e(D())},t.onerror=function(){e(S("Error on image loading on url: ".concat(n)))}})):Y(r)?c((t=r,function(e){fetch(t).then((function(e){if(!e.ok){var t=new Error;throw t.response=e,t}return e.text()})).then((function(t){if(""!==t){var r=JSON.parse(t);r.galleryImages?(e(L(r.galleryImages)),e(D())):e(S('Not supported file data. Json file should contain "galleryImages" array'))}else e(S('Emty file data. Json file should contain "galleryImages" array'))})).catch((function(t){e(S("Error in fetch: ".concat(t)))}))})):c(S("Not supported url. Please enter image url or json file url")),a("")},children:[Object(T.jsx)("input",{type:"text",placeholder:"Put here url to image or json file",className:"loader__form__input",onChange:function(e){a(e.target.value)},value:r}),Object(T.jsx)("button",{className:"loader__form__button",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"})]})})},H=(r(33),function(){var e=Object(N.b)(),t=Object(n.useRef)(null);return Object(n.useEffect)((function(){e(D());window.addEventListener("resize",(function(){e(D())}))}),[e]),Object(T.jsxs)("div",{className:"app",ref:t,children:[Object(T.jsx)(C,{}),Object(T.jsx)(q,{}),Object(T.jsx)(F,{}),Object(T.jsx)(J,{})]})});r(34);o.a.render(Object(T.jsx)(a.a.StrictMode,{children:Object(T.jsx)(N.a,{store:E,children:Object(T.jsx)(H,{})})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.bdbde115.chunk.js.map