{"version":3,"sources":["redux/types.js","redux/reducers/galeryReducer.js","redux/reducers/calcReducer.js","redux/reducers/errorReducer.js","redux/store.js","restrictions/index.js","redux/actions/calcAction.js","redux/actions/errorAction.js","redux/actions/galeryAction.js","components/DropField/index.js","components/DropField/DropField.js","redux/selectors/errorSelector.js","components/ErrorMessage/index.js","components/ErrorMessage/ErrorMessage.js","redux/selectors/calcSelector.js","redux/selectors/galerySelector.js","components/EmptyGalery/index.js","components/EmptyGalery/EmptyGalery.js","assets/delete.svg","components/ImageCard/index.js","components/ImageCard/ImageCard.js","components/Galery/index.js","components/Galery/Galery.js","components/Loader/Loader.js","components/Loader/index.js","App.js","index.js"],"names":["ADD_NEW_ERROR","DELETE_ERROR","ADD_IMAGE","ADD_IMAGES_ARRAY","DELETE_IMAGE","SET_CALC_RESULT","galeryReducerInit","galleryImages","galeryReducer","state","action","type","payload","galery","filter","image","index","calcReducerInit","galeryWidth","window","innerWidth","cardsArr","rowsArr","calcReducer","errorReducerInit","errors","errorReducer","err","allReducers","combineReducers","middleware","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","createStore","rowNormalHeight","rowMaxHeight","calcAction","getState","Math","ceil","document","body","scrollWidth","rowNumber","rowWidth","forEach","cardNormalWidth","height","width","newErrorAction","errorText","dispatch","addErrorAction","setTimeout","deleteErrorAction","addImageAction","addImagesFromArrayAction","imagesArray","handleDeleteImageAction","deleteIndex","deleteImageAction","DropField","useState","dropFieldClasses","setDropFieldClasses","useDispatch","className","join","onDragEnter","event","preventDefault","stopPropagation","onDragLeave","onDragOver","onDrop","files","dataTransfer","i","length","file","startsWith","Image","reader","FileReader","onload","src","result","readAsDataURL","url","text","then","JSON","parse","data","catch","error","name","errorsSelector","ErrorMessage","useSelector","map","errMessage","galeryWidthSelector","cardsSelector","rowsSelector","gallerySelector","EmptyGalery","ImageCard","rowScale","isLastRow","calcCardWidth","calcCardHeight","cardStyle","style","alt","imagePadding","onClick","deleteIcon","Galery","cards","rows","isImageUrl","exec","isJsonFile","Loader","input","setInput","onSubmit","jsonUrl","newImage","onerror","fetch","response","ok","Error","placeholder","onChange","target","value","App","contentRef","useRef","useEffect","addEventListener","ref","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f8d53c60.chunk.js","sourcesContent":["// main\r\nexport const ADD_NEW_ERROR = 'ADD_NEW_ERROR';\r\nexport const DELETE_ERROR = 'DELETE_ERROR';\r\n\r\n// galery\r\nexport const ADD_IMAGE = 'ADD_IMAGE';\r\nexport const ADD_IMAGES_ARRAY = 'ADD_IMAGES_ARRAY';\r\nexport const DELETE_IMAGE = 'DELETE_IMAGE';\r\n\r\n// calc\r\nexport const SET_CALC_RESULT = 'SET_CALC_RESULT';\r\n","import { ADD_IMAGE, ADD_IMAGES_ARRAY, DELETE_IMAGE } from 'redux/types';\r\n\r\nconst galeryReducerInit = {\r\n  galleryImages: [],\r\n};\r\n\r\nconst galeryReducer = (state = galeryReducerInit, action) => {\r\n  switch (action.type) {\r\n    case ADD_IMAGE:\r\n      return { ...state, galleryImages: [...state.galleryImages, action.payload] };\r\n\r\n    case ADD_IMAGES_ARRAY:\r\n      return {\r\n        ...state,\r\n        galleryImages: [...state.galleryImages, ...action.payload],\r\n      };\r\n\r\n    case DELETE_IMAGE:\r\n      const galery = state.galleryImages.filter((image, index) => index !== action.payload);\r\n      return { ...state, galleryImages: galery };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default galeryReducer;\r\n","import { SET_CALC_RESULT } from 'redux/types';\r\n\r\nconst calcReducerInit = {\r\n  galeryWidth: window.innerWidth,\r\n  cardsArr: [],\r\n  rowsArr: [],\r\n};\r\n\r\nconst calcReducer = (state = calcReducerInit, action) => {\r\n  switch (action.type) {\r\n    case SET_CALC_RESULT:\r\n      return { ...state, ...action.payload };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default calcReducer;\r\n","import { ADD_NEW_ERROR, DELETE_ERROR } from 'redux/types';\r\n\r\nconst errorReducerInit = {\r\n  errors: [],\r\n};\r\n\r\nconst errorReducer = (state = errorReducerInit, action) => {\r\n  switch (action.type) {\r\n    case ADD_NEW_ERROR:\r\n      return { ...state, errors: [...state.errors, action.payload] };\r\n\r\n    case DELETE_ERROR:\r\n      return {\r\n        ...state,\r\n        errors: state.errors.filter((err) => err !== action.payload),\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default errorReducer;\r\n","import { createStore, compose, combineReducers, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport galeryReducer from 'redux/reducers/galeryReducer';\r\nimport calcReducer from 'redux/reducers/calcReducer';\r\nimport errorReducer from 'redux/reducers/errorReducer';\r\n\r\nconst allReducers = combineReducers({\r\n  galeryReducer,\r\n  calcReducer,\r\n  errorReducer,\r\n});\r\n\r\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst middleware = composeEnhancer(applyMiddleware(thunk));\r\nconst store = createStore(allReducers, middleware);\r\n\r\nexport default store;\r\n","export const containerMaxWidth = 860;\r\nexport const containerMinWidth = 320;\r\nexport const rowNormalHeight = 150;\r\nexport const rowMaxHeight = rowNormalHeight * 1.2;\r\nexport const imagePadding = 3;\r\n","import { SET_CALC_RESULT } from 'redux/types';\r\nimport { rowNormalHeight } from 'restrictions';\r\nimport store from 'redux/store';\r\n\r\nexport const calcAction = () => {\r\n  const galery = store.getState().galeryReducer.galleryImages;\r\n\r\n  const galeryWidth = Math.ceil(document.body.scrollWidth);\r\n\r\n  const cardsArr = [];\r\n  const rowsArr = [];\r\n  let rowNumber = 0;\r\n  let rowWidth = 0;\r\n\r\n  galery.forEach((image, index) => {\r\n    const cardNormalWidth = (rowNormalHeight / image.height) * image.width;\r\n\r\n    if (rowWidth + cardNormalWidth > galeryWidth) {\r\n      rowNumber++;\r\n      rowWidth = cardNormalWidth;\r\n    } else {\r\n      rowWidth = rowWidth + cardNormalWidth;\r\n    }\r\n\r\n    cardsArr[index] = {\r\n      index,\r\n      cardNormalWidth,\r\n      rowNumber,\r\n    };\r\n\r\n    rowsArr[rowNumber] = Math.ceil(rowWidth);\r\n  });\r\n\r\n  return {\r\n    type: SET_CALC_RESULT,\r\n    payload: { galeryWidth, cardsArr, rowsArr },\r\n  };\r\n};\r\n","import { ADD_NEW_ERROR, DELETE_ERROR } from 'redux/types';\r\n\r\nconst addErrorAction = (errorText) => ({ type: ADD_NEW_ERROR, payload: errorText });\r\n\r\nconst deleteErrorAction = (errorText) => ({ type: DELETE_ERROR, payload: errorText });\r\n\r\nexport const newErrorAction = (errorText) => (dispatch) => {\r\n  dispatch(addErrorAction(errorText));\r\n  setTimeout(() => {\r\n    dispatch(deleteErrorAction(errorText));\r\n  }, 2000);\r\n};\r\n","import { ADD_IMAGES_ARRAY, DELETE_IMAGE, ADD_IMAGE } from 'redux/types';\r\nimport { calcAction } from './calcAction';\r\nimport { newErrorAction } from './errorAction';\r\n\r\nconst deleteImageAction = (deleteIndex) => ({ type: DELETE_IMAGE, payload: deleteIndex });\r\n\r\nconst addImageAction = (image) => ({ type: ADD_IMAGE, payload: image });\r\n\r\nconst addImagesFromArrayAction = (imagesArray) => ({\r\n  type: ADD_IMAGES_ARRAY,\r\n  payload: imagesArray,\r\n});\r\n\r\nexport const handleDeleteImageAction = (deleteIndex) => (dispatch) => {\r\n  dispatch(deleteImageAction(deleteIndex));\r\n  dispatch(calcAction());\r\n};\r\n\r\nexport const addImageFromUrlAction = (url) => (dispatch) => {\r\n  const newImage = new Image();\r\n  newImage.src = url;\r\n  newImage.onload = () => {\r\n    dispatch(addImageAction({ url, height: newImage.height, width: newImage.width }));\r\n    dispatch(calcAction());\r\n  };\r\n  newImage.onerror = () => {\r\n    dispatch(newErrorAction(`Error on image loading on url: ${url}`));\r\n  };\r\n};\r\n\r\nexport const addImagesFromDropAction = (files) => (dispatch) => {\r\n  for (let i = 0; i < files.length; i++) {\r\n    const file = files[i];\r\n    if (file.type.startsWith('image/')) {\r\n      const image = new Image();\r\n\r\n      const reader = new FileReader();\r\n      reader.onload = () => (image.src = reader.result);\r\n      reader.readAsDataURL(file);\r\n\r\n      image.onload = () => {\r\n        dispatch(addImageAction({ url: image.src, height: image.height, width: image.width }));\r\n        dispatch(calcAction());\r\n      };\r\n    } else if (file.type === 'application/json') {\r\n      file\r\n        .text()\r\n        .then((text) => JSON.parse(text))\r\n        .then((data) => {\r\n          if (data.galleryImages) {\r\n            dispatch(addImagesFromArrayAction(data.galleryImages));\r\n            dispatch(calcAction());\r\n          } else {\r\n            dispatch(\r\n              newErrorAction(\r\n                'Not supported file data. Json file should contain \"galleryImages\" array'\r\n              )\r\n            );\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          dispatch(newErrorAction(`Error in json file parsing: ${error}`));\r\n        });\r\n    } else {\r\n      dispatch(newErrorAction(`${file.name} - file type is not supported`));\r\n    }\r\n  }\r\n};\r\n\r\nexport const addImagesFromJsonFileAction = (jsonUrl) => (dispatch) => {\r\n  fetch(jsonUrl)\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        const error = new Error();\r\n        error.response = response;\r\n        throw error;\r\n      }\r\n      return response.text();\r\n    })\r\n    .then((text) => {\r\n      if (text !== '') {\r\n        const data = JSON.parse(text);\r\n        if (data.galleryImages) {\r\n          dispatch(addImagesFromArrayAction(data.galleryImages));\r\n          dispatch(calcAction());\r\n        } else {\r\n          dispatch(\r\n            newErrorAction(\r\n              'Not supported file data. Json file should contain \"galleryImages\" array'\r\n            )\r\n          );\r\n        }\r\n      } else {\r\n        dispatch(newErrorAction('Emty file data. Json file should contain \"galleryImages\" array'));\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      dispatch(newErrorAction(`Error in fetch: ${error}`));\r\n    });\r\n};\r\n","import DropField from './DropField';\r\n\r\nexport default DropField;\r\n","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { addImagesFromDropAction } from 'redux/actions/galeryAction';\r\nimport './dropField.scss';\r\n\r\nconst DropField = () => {\r\n  const [dropFieldClasses, setDropFieldClasses] = useState(['drop-field']);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleDragEnter = (event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    setDropFieldClasses(['drop-field', 'drop-field--drop-enter']);\r\n  };\r\n\r\n  const handleDragOver = (event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n  };\r\n\r\n  const handleDragLeave = () => {\r\n    setDropFieldClasses(['drop-field']);\r\n  };\r\n\r\n  const handleDrop = (event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    dispatch(addImagesFromDropAction(event.dataTransfer.files));\r\n    setDropFieldClasses(['drop-field']);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={dropFieldClasses.join(' ')}\r\n      onDragEnter={handleDragEnter}\r\n      onDragLeave={handleDragLeave}\r\n      onDragOver={handleDragOver}\r\n      onDrop={handleDrop}\r\n    />\r\n  );\r\n};\r\n\r\nexport default DropField;\r\n","export const errorsSelector = (state) => state.errorReducer.errors;\r\n","import ErrorMessage from './ErrorMessage';\r\n\r\nexport default ErrorMessage;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { errorsSelector } from 'redux/selectors/errorSelector';\r\nimport './errorMessage.scss';\r\n\r\nconst ErrorMessage = () => {\r\n  const errors = useSelector(errorsSelector);\r\n  return (\r\n    <div className=\"error-message\">\r\n      {!!errors.length &&\r\n        errors.map((errMessage) => (\r\n          <div key={errMessage} className=\"error-message__text\">\r\n            {errMessage}\r\n          </div>\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorMessage;\r\n","export const galeryWidthSelector = (store) => store.calcReducer.galeryWidth;\r\nexport const cardsSelector = (store) => store.calcReducer.cardsArr;\r\nexport const rowsSelector = (store) => store.calcReducer.rowsArr;\r\n","export const gallerySelector = (store) => store.galeryReducer.galleryImages;\r\n","import EmptyGalery from './EmptyGalery';\r\n\r\nexport default EmptyGalery;\r\n","import React from 'react';\r\nimport './emptyGalery.scss';\r\n\r\nconst EmptyGalery = () => (\r\n  <div className=\"empty-galery\">\r\n    <h2>Galery is empty</h2>\r\n    <p>Please enter url to image / json file or drop them here</p>\r\n  </div>\r\n);\r\n\r\nexport default EmptyGalery;\r\n","export default __webpack_public_path__ + \"static/media/delete.82438203.svg\";","import ImageCard from './ImageCard';\r\n\r\nexport default ImageCard;\r\n","import React from 'react';\r\nimport { imagePadding, rowMaxHeight, rowNormalHeight } from 'restrictions';\r\nimport { useDispatch } from 'react-redux';\r\nimport { handleDeleteImageAction } from 'redux/actions/galeryAction';\r\nimport deleteIcon from '../../assets/delete.svg';\r\nimport './imageCard.scss';\r\n\r\nexport default function ImageCard({ index, url, cardNormalWidth, rowScale, isLastRow }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const calcCardWidth =\r\n    isLastRow && rowNormalHeight * rowScale > rowMaxHeight\r\n      ? cardNormalWidth * (rowMaxHeight / rowNormalHeight)\r\n      : cardNormalWidth * rowScale;\r\n  const calcCardHeight =\r\n    isLastRow && rowNormalHeight * rowScale > rowMaxHeight\r\n      ? rowMaxHeight\r\n      : rowNormalHeight * rowScale;\r\n\r\n  const cardStyle = {\r\n    width: calcCardWidth + 'px',\r\n    height: calcCardHeight + 'px',\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    dispatch(handleDeleteImageAction(index));\r\n  };\r\n\r\n  return (\r\n    <div style={cardStyle} className=\"card\">\r\n      <img\r\n        className=\"card__image\"\r\n        src={url}\r\n        alt=\"img\"\r\n        width={calcCardWidth - imagePadding * 2 + 'px'}\r\n        height={calcCardHeight - imagePadding * 2 + 'px'}\r\n      />\r\n      <button className=\"card__delete-btn\" onClick={handleDelete}>\r\n        <img src={deleteIcon} alt=\"Delete\" />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import Galery from './Galery';\r\n\r\nexport default Galery;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { cardsSelector, galeryWidthSelector, rowsSelector } from 'redux/selectors/calcSelector';\r\nimport { gallerySelector } from 'redux/selectors/galerySelector';\r\nimport EmptyGalery from 'components/EmptyGalery';\r\nimport ImageCard from 'components/ImageCard';\r\nimport './galery.scss';\r\n\r\nexport default function Galery() {\r\n  const galery = useSelector(gallerySelector);\r\n  const galeryWidth = useSelector(galeryWidthSelector);\r\n  const cards = useSelector(cardsSelector);\r\n  const rows = useSelector(rowsSelector);\r\n\r\n  return (\r\n    <div className=\"galery\">\r\n      {!cards.length && <EmptyGalery />}\r\n\r\n      {!!cards.length &&\r\n        cards.length === galery.length &&\r\n        galery.map((image, index) => (\r\n          <ImageCard\r\n            key={image.url + index}\r\n            index={index}\r\n            url={image.url}\r\n            cardNormalWidth={cards[index].cardNormalWidth}\r\n            rowScale={galeryWidth / rows[cards[index].rowNumber]}\r\n            isLastRow={cards[index].rowNumber === rows.length - 1}\r\n          />\r\n        ))}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { newErrorAction } from 'redux/actions/errorAction';\r\nimport { addImagesFromJsonFileAction, addImageFromUrlAction } from 'redux/actions/galeryAction';\r\nimport './loader.scss';\r\n\r\nexport default function Loader() {\r\n  const [input, setInput] = useState('');\r\n  const dispatch = useDispatch();\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (input === '') {\r\n      dispatch(newErrorAction('Please enter image url or json file url'));\r\n    } else if (isImageUrl(input)) {\r\n      dispatch(addImageFromUrlAction(input));\r\n    } else if (isJsonFile(input)) {\r\n      dispatch(addImagesFromJsonFileAction(input));\r\n    } else {\r\n      dispatch(newErrorAction('Not supported url. Please enter image url or json file url'));\r\n    }\r\n    setInput('');\r\n  };\r\n\r\n  const handleInput = (event) => {\r\n    setInput(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"loader\">\r\n      <form className=\"loader__form\" onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Put here url to image or json file\"\r\n          className=\"loader__form__input\"\r\n          onChange={handleInput}\r\n          value={input}\r\n        />\r\n        <button className=\"loader__form__button\">Загрузить</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst isImageUrl = (url) => {\r\n  const regExpImage = /^https?:\\/\\/.+\\.(?:jpe?g|gif|png)$/gi;\r\n  return !!regExpImage.exec(url);\r\n};\r\n\r\nconst isJsonFile = (url) => {\r\n  const regExpJson = /^https?:\\/\\/.+\\.json$/gi;\r\n  return !!regExpJson.exec(url);\r\n};\r\n","import Loader from './Loader';\r\n\r\nexport default Loader;\r\n","import React, { useEffect, useRef } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { calcAction } from 'redux/actions/calcAction';\r\nimport DropField from 'components/DropField';\r\nimport ErrorMessage from 'components/ErrorMessage';\r\nimport Galery from 'components/Galery';\r\nimport Loader from 'components/Loader';\r\nimport './app.scss';\r\n\r\nconst App = () => {\r\n  const dispatch = useDispatch();\r\n  const contentRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    dispatch(calcAction());\r\n\r\n    const resizeEvent = () => {\r\n      dispatch(calcAction());\r\n    };\r\n\r\n    window.addEventListener('resize', resizeEvent);\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <div className=\"app\" ref={contentRef}>\r\n      <ErrorMessage />\r\n      <Loader />\r\n      <Galery />\r\n      <DropField />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport store from 'redux/store';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport './index.scss';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}